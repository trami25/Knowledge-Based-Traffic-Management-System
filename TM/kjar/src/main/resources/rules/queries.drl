package rules
import com.ftn.sbnz.model.models.EmergencyVehicle;
import com.ftn.sbnz.model.models.PublicTransportDelay;
import com.ftn.sbnz.model.models.Accident;
import com.ftn.sbnz.model.models.TrafficDensity;
import com.ftn.sbnz.model.models.Weather;
import com.ftn.sbnz.model.models.EventDay;
import com.ftn.sbnz.model.models.Crossroad;
import com.ftn.sbnz.model.models.TrafficAction;
import com.ftn.sbnz.model.models.Notification;

query "upstreamCause"( String $crossroad, String $cause )
    // Minimal, syntactically-correct query variants. These return any matching facts for a given crossroad.
    Accident( crossroad == $crossroad )
end

query "whyBusDelay"( String $line, String $crossroad, String $cause )
    PublicTransportDelay( line == $line, delayMinutes > 10 )
    // For now match an accident as a possible cause (keeps query simple and valid)
    Accident( crossroad == $crossroad )
end

query "whyTrafficJam"( String $crossroad, String $cause )
    TrafficDensity( crossroad == $crossroad, value > 80 )
end